From: https://minikube.sigs.k8s.io/docs/start/

$curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
$sudo install minikube-linux-amd64 /usr/local/bin/minikube

$minikube start

Install kompose (https://github.com/kubernetes/kompose)
Convert vault docker compose file (including pulling docker development image from docker hub)

$ kompose convert --chart --controller=deployment -f docker-compose.yml

Note there's a lot of autogenerated kruft in this, so the provide folder contains the beginnings of each of the pods created from scratch.

Install kubectl

$sudo apt-get update && sudo apt-get install -y apt-transport-https gnupg2 curl
$curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
$echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list
$sudo apt-get update
$sudo apt-get install -y kubectl


To start,

$minikube start

This will create a docker container, volume and network.  Remove the volume to revert back to initial status.

To view a dashboard showing running pods, services etc.:

$minikube dashboard

Using the provide folder, to create the persistent volume claim, run:

$kubectl apply -f provide-storage.yaml

and now that the persistent storage claim is present, run:

$kubectl apply -f provide-pod.yaml

This will create a pod containing ident and a database - not ideal for production use, as pods are designed as scalable components, but it's enough for now to show it in action. Containers in a pod can communicate as if they were on localhost.

Next steps are to create a deployment and service for the pod...



